/**
 * @package MediaViewer
 * @version 1.0.0
 * @description A javascript library to create a media viewing experience
 * @license MIT
 * @author XHiddenProjects
 * @repository [XHiddenProjects/MediaViewer](https://github.com/XHiddenProjects/MediaViewer)
 */
export const captions=(t,e)=>{const r=t=>t<10?`0${t}`:t,n=t=>(t=t.toString()).length>3?t.substring(3,-1):t.length<3?t.padStart(3,"0"):t,a=(t,e,r,n,a,s,o,i)=>!(t>a)&&(!(e>s)&&(!(r>o)&&!(n>i)));let s="";return"vtt"===(t=t??"vtt").toLocaleLowerCase()?(s="WEBVTT",e.map(((t,e)=>{t.start&&t.end?a(t.start.hrs??0,t.start.min,t.start.sec,t.start.ms,t.end.hrs??0,t.end.min,t.end.sec,t.end.ms)?s+=`\n\n${t.start.hrs?`${r(t.start.hrs)}:`:""}${r(t.start.min)}:${r(t.start.sec)}.${n(t.start.ms)} --\x3e ${t.end.hrs?`${r(t.end.hrs)}:`:""}${r(t.end.min)}:${r(t.end.sec)}.${n(t.end.ms)}\n${t.text?Array.isArray(t.text)?`${t.text.join("\n")}`:`${t.text}`:""}`:s+=`\n                        \n    --Error: ${t.start.hrs?`${r(t.start.hrs)}:`:""}${r(t.start.min)}:${r(t.start.sec)}.${n(t.start.ms)} --\x3e ${t.end.hrs?`${r(t.end.hrs)}:`:""}${r(t.end.min)}:${r(t.end.sec)}.${n(t.end.ms)}`:s=""}))):"srt"===t.toLocaleLowerCase()?(e.map(((t,e)=>{t.start&&t.end?a(t.start.hrs??0,t.start.min,t.start.sec,t.start.ms,t.end.hrs??0,t.end.min,t.end.sec,t.end.ms)?s+=`\n\n${e+1}\n${t.start.hrs?`${r(t.start.hrs)}:`:`${r(0)}:`}${r(t.start.min)}:${r(t.start.sec)},${n(t.start.ms)} --\x3e ${t.end.hrs?`${r(t.end.hrs)}:`:`${r(0)}:`}${r(t.end.min)}:${r(t.end.sec)},${n(t.end.ms)}\n${t.text?Array.isArray(t.text)?`${t.text.join("\n")}`:`${t.text}`:""}`:s+=`\n                        \n    --Error: ${t.start.hrs?`${r(t.start.hrs)}:`:""}${r(t.start.min)}:${r(t.start.sec)}.${n(t.start.ms)} --\x3e ${t.end.hrs?`${r(t.end.hrs)}:`:""}${r(t.end.min)}:${r(t.end.sec)}.${n(t.end.ms)}`:s=""})),s=s.replace(/^\n\n/,"")):"sbv"===t.toLocaleLowerCase()&&(e.map(((t,e)=>{t.start&&t.end?a(t.start.hrs??0,t.start.min,t.start.sec,t.start.ms,t.end.hrs??0,t.end.min,t.end.sec,t.end.ms)?s+=`\n\n${t.start.hrs?`${r(t.start.hrs)}:`:""}${r(t.start.min)}:${r(t.start.sec)}.${n(t.start.ms)},${t.end.hrs?`${r(t.end.hrs)}:`:""}${r(t.end.min)}:${r(t.end.sec)}.${n(t.end.ms)}\n${t.text?Array.isArray(t.text)?`${t.text.join("\n")}`:`${t.text}`:""}`:s+=`\n                        \n    --Error: ${t.start.hrs?`${r(t.start.hrs)}:`:""}${r(t.start.min)}:${r(t.start.sec)}.${n(t.start.ms)} --\x3e ${t.end.hrs?`${r(t.end.hrs)}:`:""}${r(t.end.min)}:${r(t.end.sec)}.${n(t.end.ms)}`:s=""})),s=s.replace(/^\n\n/,"")),s};export const clipboard={copy:t=>!(!navigator.clipboard||!navigator.clipboard.writeText)&&(navigator.clipboard.writeText(t).then((()=>{})).catch((t=>!1)),!0),paste:t=>{if(!navigator.clipboard||!navigator.clipboard.readText)return!1;navigator.clipboard.readText().then((e=>t&&"value"in t?(t.value=e,!0):!(!t||!("innerText"in t))&&(t.innerText=e,!0))).catch((t=>!1))},pasteRaw:t=>{if(!navigator.clipboard||!navigator.clipboard.readText)return!1;navigator.clipboard.readText().then((e=>!(!t||!("textContent"in t))&&(t.textContent=e,!0))).catch((t=>!1))}};export const customize=(t={})=>{const e={};if(!t||"object"!=typeof t)return{};for(const[r,n]of Object.entries(t))Array.isArray(n)?e[r]=n.join(";"):e[r]=n;return e};export const contrastRatio=(t=[{}])=>{const e={},r=t=>{if(!t||void 0===t)return 1;/^#([0-9A-Fa-f]{6})$/.test(t)||(t=/^rgb\(/i.test(t)?(t=>`#${t.match(/\d+/g).map((t=>parseInt(t).toString(16).padStart(2,"0"))).join("").toUpperCase()}`)(t):(t=>{const e=document.createElement("canvas").getContext("2d");return e.fillStyle=t,e.fillStyle.toUpperCase()})(t));return t.replace("#","").match(/.{2}/g).map((t=>parseInt(t,16)/255)).map((t=>t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))).reduce(((t,e,r)=>t+e*[.2126,.7152,.0722][r]),0)};t.forEach((({color:t,bg:n})=>{const a=r(t),s=r(n),o=Math.max(a,s),i=Math.min(a,s);e[(o+.05)/(i+.05)]=t}));const n=Math.max(...Object.keys(e).map(Number));return e[n]||"#FF0000"};export const getProperties=(t,e="",r="")=>{const n={},a=window.getComputedStyle(e?t.container.querySelector(e):t.container);for(const t of a)n[t]=a.getPropertyValue(t);return r?n[r]:n};export const color={name2hex:t=>{const e=document.createElement("canvas").getContext("2d");return e.fillStyle=t,e.fillStyle.toUpperCase()},rgb2hex:t=>`#${t.match(/\d+/g).map((t=>parseInt(t).toString(16).padStart(2,"0"))).join("").toUpperCase()}`,hex2rgb:t=>{/^#([0-9A-Fa-f]{6})$/.test(t)||(t=color.colorToHex(t));return`rgb(${t.replace("#","").match(/.{2}/g).map((t=>parseInt(t,16))).join(",")})`},name2rgb:t=>{const e=document.createElement("canvas").getContext("2d");e.fillStyle=t;return`rgb(${e.fillStyle.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i).slice(1).map((t=>parseInt(t,16))).join(",")})`},parseRGB:t=>{const e=t.match(/\d+/g);return e?{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2])}:null}};export const videoData=(t,e,r)=>{const n=document.createElement("video");n.src=t,n.currentTime=e,n.crossOrigin="anonymous",n.addEventListener("loadedmetadata",(function(){const t=document.createElement("canvas");t.width=n.videoWidth,t.height=n.videoHeight,n.addEventListener("seeked",(function(){t.getContext("2d").drawImage(n,0,0,t.width,t.height);const e=t.toDataURL("image/png");r({poster:e,duration:n.duration}),n.remove(),t.remove()}))})),n.load()};export async function genID(t){const e=(new TextEncoder).encode(t),r=await crypto.subtle.digest("SHA-256",e),n=Array.from(new Uint8Array(r)),a=btoa(String.fromCharCode(...n));return a.replace(/\+/g,"-").replace(/\//g,"_").substring(0,10)}export const fileName=(t,e=!1)=>e?t.match(/([^\/]+)(?=\.\w+$)/)[1].replace(/_\d+p$/,""):t.match(/([^\/]+)\.(\w+)$/)[1].replace(/_\d+p$/,"");export const resizeEmbed=()=>{window.parent.document.querySelectorAll("iframe").forEach((t=>{(t.hasAttribute("width")||t.hasAttribute("height"))&&(t.style.width=`${t.width}px`,t.style.height=`${t.height}px`,t.style.maxWidth=`${t.width}px`,t.onload=()=>{setTimeout((()=>{const e=t.contentDocument?.querySelector(".video-title");e&&(e.style.width=t.contentDocument?.querySelector(".video-frame").clientWidth-10+"px")}),500)})}))};export const GenerateQRCode=(t,e)=>{setTimeout((()=>{window.QRCode&&new QRCode(t,e)}),500)};
